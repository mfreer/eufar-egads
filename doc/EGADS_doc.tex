%
% Important note: This latex document should be generated by pdflatex
% to get pdf support right.
%


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Document class and package options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[a4paper,11pt]{report}
\usepackage{graphicx}
\usepackage{hyperref}
\usepackage{fancyvrb}
\usepackage{paralist}
\usepackage{makeidx}
\usepackage{color,calc}
\definecolor{shade}{gray}{0.8}
\newcommand{\makeshadebox}[1]{\fcolorbox{black}{shade}{\makebox{#1}}}

\newcommand{\egads}{\textsc{egads} }
\newcommand{\Egads}{\textsc{Egads} }

\newcounter{actioncounter}
\addtocounter{actioncounter}{1}

\newcommand{\mf}{M\'et\'eoFrance}

\newcommand{\algdesc}[8]{
\section{#1}\bigskip

\textbf{Algorithm name:} #2 \bigskip

\textbf{Summary:} #3 \bigskip

\begin{tabular}{p{2cm} p{2cm} p{8cm}}
	\multicolumn{3}{l}{\textbf{Inputs:}}\\
	\hline
	#4
\end{tabular}

\vspace{0.5cm}


\begin{tabular}{p{2cm} p{2cm} p{8cm}}
	\multicolumn{3}{l}{\textbf{Outputs:}}\\
	\hline
	#5
\end{tabular}

\vspace{1cm}

\textbf{Formula:} #6
\bigskip

\textbf{Source:} #7 \bigskip

\textbf{References:}  #8

\pagebreak

}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Include page set-up options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\input{pagesetup.cfg}
\makeindex
\begin{document}
\renewcommand{\thepage}{\roman{page}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Title Page
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{cover/doc_cover}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Indices
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\tableofcontents
\pagebreak


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% INTRO %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\thepage}{\arabic{page}}
\setcounter{page}{1}

\chapter{Introduction}

The motivation behind \egads (\textsc{Eufar} General Airborne Data-processing Software) was to create a general method for processing airborne atmospheric sciences data from all...

The current \egads implementation allows users to interact with data processing algorithms using the Python command-line or via Python scripts. Python was chosen due to its straightforward syntax and flexibility between multiple systems. Central to \egads is a data type that encapsulates data and metadata into one object. This simplifies the housekeeping of such data, and allows it to be easily passed between algorithms and data files.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% INSTALLATION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Installation}

The latest version of \egads can be obtained from http://eufar-egads.googlecode.com

\section{Prerequisites}

Building \egads requires the following software to be installed:

\begin{description}
 \item[Python] 2.5 or newer. Available at \href{http://www.python.org/}{http://www.python.org/}.
 \item[numpy] 1.3.0 or newer. Available at \href{http://numpy.scipy.org/}{http://numpy.scipy.org/}.
 \item[scipy] 0.6.0 or newer. Available at \href{http://www.scipy.org/}{http://www.scipy.org/}.
 \item[Python netCDF4 libraries] 0.8.2. Available at \href{http://code.google.com/p/netcdf4-python/}{http://code.google.com/p/netcdf4-python/}.
\end{description}

\section{Optional Packages}

The following are useful when using or compiling \egads:

\begin{description}
 \item[IPython] An optional package which simplifies Python command line usage (\href{http://ipython.scipy.org}{http://ipython.scipy.org}). IPython is an enhanced interactive Python shell which supports tab-completion, debugging, history, etc. 

 \end{description}

\section{Installation}
To install \egads, type \verb|python setup.py install| from the command line. To install to a user-specified location, type \verb|python setup.py install --prefix=$MYDIR|. 

\section{Testing}

To test \egads after it is installed, run the following commands in Python:

\begin{command}
   >>> import egads
   >>> egads.test()
\end{command} 

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% TUTORIAL %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Tutorial}

\section{Command-line usage}
The simplest way to start working with \egads is to run it from the Python command line. To load egads into the Python namespace, simply import it:

\begin{command}
    >>> import egads
\end{command}
You may then begin working with any of the algorithms contained in \egads.

\subsection{Exploring \egads}
There are several useful methods to explore routines contained in \egads. The first is using the Python built-in \verb|dir()| command:

\begin{command}
    >>> dir(egads)
\end{command}
returns all the classes and subpackages contained in \egads. \Egads follows the naming conventions from the Python Style Guide (\href{http://www.python.org/dev/peps/pep-0008}{http://www.python.org/dev/peps/pep-0008}), so classes are always \verb|MixedCase|, functions and modules are generally \verb|lowercase| or \verb|lowercase_with_underscores|. As a further example,

\begin{command}
    >>> dir(egads.input)
\end{command}
would returns all the classes and subpackages of the \verb|egads.input| module.

Another way to explore \egads is by using tab completion, if supported by your Python installation. Typing 

\begin{command}
    >>> egads.
\end{command}
then hitting \textsc{tab} will return a list of all available options. 

Python has built-in methods to display documentation on any function known as docstrings. The easiest way to access them is using the \verb|help()| function:

\begin{command}
   >>> help(egads.input.NetCdf)
\end{command}
will return all methods and their associated documentation for the NetCdf class.

\subsection{Working with NetCDF files}

\Egads provides two classes to work with NetCDF files. The simplest, \verb|egads.input.NetCdf()|, allows simple read/write operations to NetCDF files. The other, \verb|egads.input.EgadsNetCdf()|, is designed to interface with NetCDF files conforming to the N6SP data and metadata regulations. This class directly reads or writes NetCDF data using instances of the \verb|EgadsData| class.

\subsubsection{Opening}

To open a NetCDF file, simply create a \verb|egads.input.NetCdf()| instance and then use the \verb|open(pathname, permissions)| command:

\begin{command}
    >>> import egads
    >>> f = egads.input.NetCdf()
    >>> f.open('/pathname/filename','r')
\end{command}
%
Valid values for permissions are:

\begin{itemize}
 \item \verb|r| -- Read: opens file for reading only. Default value if nothing is provided.
 \item \verb|w| -- Write: opens file for writing, and overwrites data in file.
 \item \verb|a| -- Append: opens file for appending data.
 \item \verb|r+| -- Same as 'a'.
\end{itemize}


\subsubsection{Getting info}

\begin{itemize}
\item \verb|f.get_dimensions()| -- returns list of all dimensions and their sizes
\item \verb|f.get_dimensions(var_name)| -- returns list of all dimensions for \verb|var_name|
\item \verb|f.get_attributes()| -- returns a list of all top-level attributes
\item \verb|f.get_attributes(var_name)| -- returns list of all attributes attached to \verb|var_name|
\item \verb|f.get_variables()| -- returns list of all variables
\item \verb|f.get_filename()| -- returns filename for currently opened file
\end{itemize}

\subsubsection{Reading data}

To read data from a file, use the \verb|read_variable()| function:

\begin{command}
    >>> data = f.read_variable(var_name, input_range)
\end{command}
where \verb|var_name| is the name of the variable to read in, and \verb|input_range| (optional) is a XXXXX

If using the \verb|egads.input.NetCdf()| class, an array of values contained in \verb|var_name| will be returned. IF using the \verb|egads.input.EgadsNetCdf()| class, an instance of the \verb|EgadsData()| class will be returned containing the values and attributes of \verb|var_name|.

\subsubsection{Writing data}

The following describe how to add dimenisons or attributes to a file.
\begin{itemize}
\item \verb|f.add_dim(dim_name, dim_size)| -- add dimension to file
\item \verb|f.add_attribute(attr_name, attr_value)| -- add attribute to file
\item \verb|f.add_attribute(attr_name, attr_value, var_name)| -- add attribute to \verb|var_name|
\end{itemize}

Data can be output to variables using the \verb|write_variable()| function as follows:

\begin{command}
    >>> f.write_variable(data, var_name, dims, type)
\end{command}

where \verb|var_name| is a string for the variable name to output, \verb|dims| is a tuple of dimension names (not needed if the variable already exists), and \verb|type| is the data type of the variable. The default value is \textit{double}, other valid options are \textit{float}, \textit{int}, \textit{short}, \textit{char} and \textit{byte}. 

If using \verb|egads.input.NetCdf()|, values for \verb|data| passed into \verb|write_variable| must be scalar or array. Otherwise, if using \verb|egads.input.EgadsNetCdf()|, an instance of \verb|EgadsData()| must be passed into \verb|write_variable|. In this case, any attributes that are contained within the \verb|EgadsData()| instance are applied to the NetCDF variable as well.

\subsubsection{Closing}

To close a file, simply use the \verb|close() command|:

\begin{command}
    >>> f.close()
\end{command}

\section{Scripting}

Another option for using \egads is to create script files, which are useful for common or repetitive tasks. This can be done using any available text editor. The example script belows shows the calculation of density for all NetCDF files in a directory.

\VerbatimInput[	fontsize=\small,
	frame=single,
	baselinestretch=1,
	samepage=true,
	numbers=left,
	numbersep=2pt,
	stepnumber=5,
	xleftmargin=15pt]{example.py}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%% APPENDIX %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{appendix}

\chapter{Class reference}

 
\end{appendix}







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%% Bibliography
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newpage\addcontentsline{toc}{section}{Bibliography and references}
%\begin{thebibliography}{5}
%\bibitem{Vahdat et al., 2002} Vahdat A., Yocum K., Walsh K., Mahadevan P., Kosti\c{c} D., Chase J., and Becker D. (2002). Scalability and Accuracy in a Large-Scale Network Emulator. \emph{Proceedings of 5th Symposium on Operating Systems Design and Implementation (OSDI)}
%\bibitem{Modelnet} Modelnet. http://issg.cs.duke.edu/modelnet.html.
%\bibitem{ModelNetRelease} Modelnet release page. http://sysnet.ecsd.edu/modelnet/realease.html.
%\bibitem{ModelNetHowto} Modelnet Howto. http://sysnet.ucsd.edu/modelnet/howto.html.
%\bibitem{Holenstein, 2005} Holenstein R. (2005). Scalability and Accuracy in a Large-Scale Network Emulator - CPSC 538A - Paper Presentation
%\bibitem{Harpin, 2001} Harpin, T. (2001). Using java.lang.reflect.Proxy to Interpose on Java Class Methods. \emph{Sun Developer Network (SDN)}. http://java.sun.com/developer/technicalArticles/JavaLP/Interposing/.
%\bibitem{Kostic, 2006} Kostic D. (2005). Modelnet notes. http://resolute.ucsd.edu/dokuwiki/notes:modelnet.
%\end{thebibliography}


\end{document}